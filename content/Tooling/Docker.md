ðŸ“‚ [[Tooling]]

----
### Tutorials

> [!info] Docker for Beginners  
> Docker is a tool that developers use to simplify developing and shipping applications.  
> [https://testdriven.io/blog/docker-for-beginners/](https://testdriven.io/blog/docker-for-beginners/)  

> [!info] Docker Best Practices for Python Developers  
> This article looks at some best practices to follow when writing Dockerfiles and working with Docker in general.  
> [https://testdriven.io/blog/docker-best-practices/#dockerfiles](https://testdriven.io/blog/docker-best-practices/#dockerfiles)  

> [!info] On Docker  
> Running Headless Chrome with Puppeteer and Docker  
> [https://vsupalov.com/docker/](https://vsupalov.com/docker/)  

> [!info] Dockerizing Flask with Postgres, Gunicorn, and Nginx  
> This is a step-by-step tutorial that details how to configure Flask to run on Docker with Postgres.  
> [https://testdriven.io/blog/dockerizing-flask-with-postgres-gunicorn-and-nginx/#nginx](https://testdriven.io/blog/dockerizing-flask-with-postgres-gunicorn-and-nginx/#nginx)  
[https://www.youtube.com/watch?v=QF4ZF857m44](https://www.youtube.com/watch?v=QF4ZF857m44)

> [!info] Orientation and setup  
> Update to the Docker Desktop terms Commercial use of Docker Desktop in larger enterprises (more than 250 employees OR more than $10 million USD in annual revenue) now requires a paid subscription.  
> [https://docs.docker.com/engine/getstarted/](https://docs.docker.com/engine/getstarted/)  

> [!info] How To Install and Use Docker Compose on Ubuntu 22.04 | DigitalOcean  
> Docker simplifies the process of managing application processes in containers.  
> [https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-compose-on-ubuntu-22-04](https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-compose-on-ubuntu-22-04)  

> [!info] Get started with Docker Compose  
> Estimated reading time: 12 minutes On this page you build a simple Python web application running on Docker Compose.  
> [https://docs.docker.com/compose/gettingstarted/](https://docs.docker.com/compose/gettingstarted/)  

> [!info] Docker Best Practices for Python Developers  
> This article looks at some best practices to follow when writing Dockerfiles and working with Docker in general.  
> [https://testdriven.io/blog/docker-best-practices/](https://testdriven.io/blog/docker-best-practices/)  
### Shell Commands

> [!info] Docker run reference  
> Docker runs processes in isolated containers.  
> [https://docs.docker.com/engine/reference/run/](https://docs.docker.com/engine/reference/run/)  
```Bash
# List volumes
sudo docker volume ls
# Inspect volume (show where it is, too)
sudo docker volume inspect django-c3-pages-docker_postgres_data
# List containers
# https://docs.docker.com/engine/reference/commandline/ps/
sudo docker ps
```
### Backup / restore Volumes

> [!info] How to Back Up Your Docker Volumes  
> Docker volumes are used to store persistent data separately from your containers.  
> [https://www.howtogeek.com/devops/how-to-back-up-your-docker-volumes/](https://www.howtogeek.com/devops/how-to-back-up-your-docker-volumes/)  

> [!info] Use volumes  
> Volumes are the preferred mechanism for persisting data generated by and used by Docker containers.  
> [https://docs.docker.com/storage/volumes/#backup-restore-or-migrate-data-volumes](https://docs.docker.com/storage/volumes/#backup-restore-or-migrate-data-volumes)  
```Bash
# Creates 'backup.tar' with postgresql data in current directory
#
# Container id of Postgres (f0de8da471d2) got from 'sudo docker ps' when containers are up
# '/var/lib/postgresql/data/' is from 'docker-compose.yml', lines:
# volumes:
#      - postgres_data:/var/lib/postgresql/data/
cd /Users/hazadus/backup
sudo docker run --rm --volumes-from 5e1ffd7ed38b -v $(pwd):/backup ubuntu tar cvf /backup/backup.tar /var/lib/postgresql/data/
```
```Bash
# Restoring postgresql data from backup tar
#
#
# ls -al
sudo docker run --rm -v django-c8-newspaper_postgres_data:/var/lib/postgresql/data/ -v $PWD:/backup-dir bash -c "cd /var/lib/postgresql/data/ && ls -al"
#
# untar - RUN FROM DIR WITH 'backup.tar' in it!!!
#
cd /Users/hazadus/backup
sudo docker run --rm -v django-c8-newspaper_postgres_data:/var/lib/postgresql/data/ -v $PWD:/backup-dir bash -c "tar xvf /backup-dir/backup.tar"
```
### Backup / Restore Postgres DB

> [!info] Docker Hub  
>  
> [https://hub.docker.com/r/prodrigestivill/postgres-backup-local](https://hub.docker.com/r/prodrigestivill/postgres-backup-local)  
### Disk Cleanup
```Bash
docker system df
docker builder prune
docker system prune
```
```Bash
# "Advanced" cleanup
# https://habr.com/ru/post/486200/
docker system prune -f -a --volumes
```
### Docker Compose â€“ run from file
```Bash
up_dev:
	docker compose -f docker-compose.dev.yml up --build
up_prod:
	docker compose -f docker-compose.prod.yml up -d --build
down:
	docker compose -f docker-compose.prod.yml down
```
### Docker `init`
Use CLI tool to create necessary Docker files in the project directory: `docker init`.

## Build Container and Push To Hub

```bash
# hub username=hazadus, tag=v1
docker build -t hazadus/apusher-backend:v1 .

# list images
docker images

# push to Docker Hub
docker push hazadus/apusher-backend:v1
```