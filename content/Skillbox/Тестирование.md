Модуль 29 – Pytest, Mock

----
29.1 – [Виды тестирования](https://go.skillbox.ru/profession/profession-python/python-advanced/ed7d31ed-f84a-4767-a85c-eefb08732ab9/videolesson)

Зачем нужно тестирование:
- Экономия финансов: раньше узнаем про ошибки, быстрее их исправим, меньше ресурсов потратим на это в будущем.
- Безопасность
- Качество продукта
- Удовлетворённость пользователей
- Экономия времени и нервов
- Качество написания кода

![[Pasted image 20240420122200.png]]

**Unit testing** (модульное тестирование) – изолированно тестируются отдельные уровни и компоненты программы. Позволяют быстро исправить ошибки на самом низком уровне и служат хорошей документацией кода. Количество таких тестов должно быть самым большим (см. на пирамиду).

**Integration testing** (интеграционное тестирование) – блоки программы тестируются уже группами. Проверяется, что разные блоки программы правильно взаимодействуют.

**System testing** (системное тестирование) – проверяем работу системы в целом с точки зрения пользователей. Проверяется в основном выполнение бизнес-функций. Проверяется нагрузка и скорость работы с сервисом. Среда, в которой производится тестирование, должна быть максимально приближена к продакшен.

**Acceptance testing** (приёмочное тестирование) – удовлетворение заказчика, выполнение всех функций из ТЗ, безопасность.

----
29.2 [pytest](https://go.skillbox.ru/profession/profession-python/python-advanced/82b39367-8310-42b6-9335-2632c384be86/videolesson)

Основная концепция – применение питоновского оператора `assert`.

Можно ставить маркеры на тесты: `@pytest.mark.marker_name`, и потом запускать тесты с определенным маркером командой `pytest -m marker_name`. Надо прописать его в `ini`:

```yaml
[pytest]
markers=
	marker_name:Some description text
```

`pytest --markers` выводит инфу по всем маркерам.

----
29.3 [TDD, BDD](https://go.skillbox.ru/profession/profession-python/python-advanced/abe6af3f-1adc-4473-ab14-794e0b280b3f/videolesson)

TDD: "красный, зеленый, рефакторинг".

BDD: behavior-driven development.

----
Дополнительно изучить:
1. Изучите документацию по работе с [conftest.py.](https://docs.pytest.org/en/6.2.x/fixture.html#scope-sharing-fixtures-across-classes-modules-packages-or-session)
2. Познакомьтесь с [расширениями](https://docs.pytest.org/en/7.0.x/reference/plugin_list.html#plugin-list) `pytest` (`pytest-html`, `pytest-mock` и другие).
3. https://flask.palletsprojects.com/en/3.0.x/testing/
4. https://flask.palletsprojects.com/en/3.0.x/testing/#running-commands-with-the-cli-runner
