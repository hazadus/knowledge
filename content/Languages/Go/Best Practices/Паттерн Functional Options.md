–ò—Å—Ç–æ—á–Ω–∏–∫: [–ø–æ—Å—Ç –≤ –¢–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–µ](https://t.me/ntuzov/461)
–°–º. —Ç–∞–∫–∂–µ [[–§—É–Ω–∫—Ü–∏–∏#–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å –æ–ø—Ü–∏—è–º–∏ (funcopts)]]

----
–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ —Ç–∞–∫–∂–µ –ø–æ—Ä–æ–π –º–æ–∂–µ—Ç –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è Option Pattern, OptFunc, Config Fucation, funcopts –∏ —Ç.–ø., –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ–∞–Ω—Ç–∞–∑–∏–∏ –≤–∞—à–∏—Ö –∫–æ–ª–ª–µ–≥.

–î–∞, –∫–∞–∫ –º—ã –∑–Ω–∞–µ–º, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã Go –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç, –Ω–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Ç–∞–∫:

```go
func SendNotification(userID string, msg string, opts ...OptionFunc)
```

–í–º–µ—Å—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –º—ã –ø–µ—Ä–µ–¥–∞–µ–º –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–æ–ø—Ü–∏–π), –≤ –≤–∏–¥–µ variadic-–∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ ‚Äî¬†opts.

–ù–∏–∂–µ –º—ã –µ—â—ë —Ä–∞–∑–±–µ—Ä—ë–º—Å—è –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –¥–∞–≤–∞–π—Ç–µ —Å–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ —ç—Ç–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è. –¢–µ–ø–µ—Ä—å –≤—ã–∑–æ–≤—ã –±—É–¥—É—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:

```go
// –° –æ—Ç–ø—Ä–∞–≤–∫–æ–π –°–ú–°, –Ω–æ –±–µ–∑ Email –∏ –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
SendNotification(userID, myMessage, WithSMS())

// –° –æ—Ç–ø—Ä–∞–≤–∫–æ–π Email –∏ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º6
SendNotification(userID, myMessage, WithEmail(), WithPriority(HighPriority))

// –ò –±–µ–∑ –≤—Å–µ–≥–æ —ç—Ç–æ–≥–æ:
SendNotification(userID, myMessage)
```

**–ß—Ç–æ –Ω–∞–º —ç—Ç–æ –¥–∞—ë—Ç:**

- –ù–µ –Ω–∞–¥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å —É–∂–µ –∏–º–µ—é—â–∏–µ—Å—è –≤—ã–∑–æ–≤—ã, –æ–Ω–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –í—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π –º–µ–Ω–µ–µ –≥—Ä–æ–º–æ–∑–¥–∫–∏–µ, –∫–æ–≥–¥–∞ –≤–µ—Å—å –Ω–∞–±–æ—Ä –æ–ø—Ü–∏–π —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—á–µ–Ω—å —Ä–µ–¥–∫–æ, –ª–∏–±–æ –Ω–∏–∫–æ–≥–¥–∞
- –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∏ —É–∑–Ω–∞–≤–∞–µ–º—ã–π, –∞ –∑–Ω–∞—á–∏—Ç –≤–∞—à –æ–ø—ã—Ç–Ω—ã–π –∫–æ–ª–ª–µ–≥–∞ —Å—Ä–∞–∑—É –ø–æ–π–º—ë—Ç —Å—É—Ç—å, –ª–∏—à—å –æ–∫–∏–Ω—É–≤ –≤–∞—à –∫–æ–¥ –±—ã—Å—Ç—Ä—ã–º –≤–∑–≥–ª—è–¥–æ–º.
- –ú–æ—ë —Å—É–±—ä–µ–∫—Ç–∏–≤–Ω–æ–µ –º–Ω–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —É–¥–æ–±–Ω–æ, –∫—Ä–∞—Å–∏–≤–æ –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ. –ù–æ —Ç—É—Ç –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ –º–Ω–æ–π –Ω–µ —Å–æ–≥–ª–∞—Å–∏—Ç—å—Å—è, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –±—É–¥—Ç–æ –±—ã –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–º–∏, —Å—Ä–∞–≤–Ω–∏—Ç–µ:¬†
	```go
	(true, false, "high", "important", ...)
	```
	–∏
	```go
	(WithSMS(), WithEmail(), WithPriority("high"), WithTitle("important"), ...)
	```

–í –ø–µ—Ä–≤–æ–º —Å–ª—É—á–∞–µ –≤—ã –º–æ–∂–µ—Ç–µ –ª–∏—à—å –¥–æ–≥–∞–¥—ã–≤–∞—Ç—å—Å—è, –∫–∞–∫–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, –≤–æ –≤—Ç–æ—Ä–æ–º —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç–µ —á—Ç–æ –µ—Å—Ç—å —á—Ç–æ

–ù–æ –µ—Å—Ç—å –∏ –º–∏–Ω—É—Å—ã ‚Äî –Ω—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —á—É—Ç—å –±–æ–ª—å—à–µ –∫–æ–¥–∞, –∏ –∫–æ–≥–¥–∞ —Ç–∞–∫–∏—Ö With() —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–Ω–æ–≥–æ, –≤—ã–≥–ª—è–¥–∏—Ç —ç—Ç–æ –¥–∞–∂–µ –±–æ–ª–µ–µ –≥—Ä–æ–º–æ–∑–¥–∫–æ, —á–µ–º —Ä–∞–Ω—å—à–µ. –¢–æ –µ—Å—Ç—å, –µ—Å–ª–∏ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –≤—ã–∑–æ–≤–æ–≤ –≤–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –º–Ω–æ–≥–æ –ø–æ–¥–æ–±–Ω—ã—Ö –æ–ø—Ü–∏–π, —Ç–æ, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —ç—Ç–æ –Ω–µ –≤–∞—à –≤–∞—Ä–∏–∞–Ω—Ç.

–ï—Å–ª–∏ –≤–∞–º —ç—Ç–æ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, –µ—Å—Ç—å –∏ –¥—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä:¬†

- –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤–º–µ—Å—Ç–æ –Ω–∞–±–æ—Ä–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–¥–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É (—Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ aws-sdk-go)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤—ã–∑–æ–≤–æ–≤ –∏ –¥—Ä.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**

–°–Ω–∞—á–∞–ª–∞ –æ–ø–∏—Å—ã–≤–∞–µ–º —Ç–∏–ø OptionFunc –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–¥–∞—é—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```go
type OptionFunc func(*Notification)  
  
func WithEmail() OptionFunc {  
    return func(n *Notification) {  
       n.SendEmail = true  
    }  
}  
  
func WithSMS() OptionFunc {  
    return func(n *Notification) {  
       n.SendSMS = true  
    }  
}  
  
func WithPriority(priority string) OptionFunc {  
    return func(n *Notification) {  
       n.Priority = priority  
    }  
}
```

–¢–µ–ø–µ—Ä—å —É—á–∏–º –Ω–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é `SendNotification()` –ø—Ä–∏–º–µ–Ω—è—Ç—å –≤—Å—ë —ç—Ç–æ:

```go
func SendNotification(userID string, msg string, opts ...OptionFunc) {
  // –°–æ–∑–¥–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –±–∞–∑–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
  notification := &Notification{
    UserID:  userID,
    Message: message,
  }

  // –ü—Ä–∏–º–µ–Ω—è–µ–º –æ–ø—Ü–∏–∏
  for _, opt := range opts {
    opt(notification)
  }

  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  send(notification)
}
```

–Ø –≤—Å—Ç—Ä–µ—á–∞–ª —ç—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –≤–æ –≤—Å–µ—Ö –∫–æ–º–ø–∞–Ω–∏—è—Ö, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –ø–∏—Å–∞–ª –∫–æ–¥ –Ω–∞ Go, –∏ –º–Ω–µ –æ–Ω –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ –∑–∞—à–µ–ª. –ò –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω –≤–∞–º –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è, —Å—Ç–∞–ª–∫–∏–≤–∞—Ç—å—Å—è –≤—ã —Å –Ω–∏–º –±—É–¥–µ—Ç–µ —á–∞—Å—Ç–æ, –ø–æ—ç—Ç–æ–º—É –ø–æ–Ω–∏–º–∞—Ç—å —á—Ç–æ —ç—Ç–æ –∏ –∑–∞—á–µ–º —Ç–æ—á–Ω–æ —Å—Ç–æ–∏—Ç.

## –ü–æ–ª–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–º–µ—Ä–∞

```go
package main

import (
  "fmt"
)

type Notification struct {
  UserID    string
  Message   string
  SendEmail bool
  SendSMS   bool
  Priority  string
}

type OptionFunc func(*Notification)

func WithEmail() OptionFunc {
  return func(n *Notification) {
    n.SendEmail = true
  }
}

func WithSMS() OptionFunc {
  return func(n *Notification) {
    n.SendSMS = true
  }
}

func WithPriority(priority string) OptionFunc {
  return func(n *Notification) {
    n.Priority = priority
  }
}

func SendNotification(userID string, msg string, opts ...OptionFunc) {
  // –°–æ–∑–¥–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –±–∞–∑–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
  notification := &Notification{
    UserID:  userID,
    Message: msg,
  }

  // –ü—Ä–∏–º–µ–Ω—è–µ–º –æ–ø—Ü–∏–∏
  for _, opt := range opts {
    opt(notification)
  }

  // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  printNotification(notification)
}

func printNotification(notification *Notification) {
  fmt.Printf("Sending notification to user: %s\n", notification.UserID)
  fmt.Printf("Message: %s\n", notification.Message)

  if notification.SendEmail {
    fmt.Println("Sending Email...")
  }
  if notification.SendSMS {
    fmt.Println("Sending SMS...")
  }
  if notification.Priority != "" {
    fmt.Printf("Priority: %s\n", notification.Priority)
  }

  fmt.Println("Notification sent successfully!")
  fmt.Println("--------")
}

func main() {
  // –í—ã–∑–æ–≤ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø—Ü–∏–π
  SendNotification("user123", "Hello, world!")

  // –í—ã–∑–æ–≤ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π Email
  SendNotification("user456", "Important update!", WithEmail())

  // –í—ã–∑–æ–≤ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π SMS –∏ –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
  SendNotification("user789", "Urgent update!", WithSMS(), WithPriority("high"))
}
```

----
üìÇ [[Best Practices]] | –ü–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ: 29.08.2024 08:53